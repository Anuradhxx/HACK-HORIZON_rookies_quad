{% extends "base.html" %}

{% block title %}Plant Map - Smart Plant Identifier{% endblock %}

{% block head_extra %}
<script src="{{ url_for('static', filename='js/map.js') }}" defer></script>
<script src="{{ url_for('static', filename='js/dummyData.js') }}" defer></script>
{% endblock %}

{% block content %}
<section class="map-section">
    <div class="map-container">
        <div id="map" class="map-view"></div>
        
        <div class="map-sidebar" id="map-sidebar">
            <div class="sidebar-header">
                <h2>Plant Map</h2>
            </div>
            
            <div class="sidebar-content">
                <div class="location-controls">
                    <h3>Your Location</h3>
                    <form id="location-form">
                        {{ form.hidden_tag() }}
                        <div class="form-group">
                            <label for="latitude">Latitude</label>
                            {{ form.latitude(id="latitude", class="form-control") }}
                        </div>
                        <div class="form-group">
                            <label for="longitude">Longitude</label>
                            {{ form.longitude(id="longitude", class="form-control") }}
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary btn-block">Update Map</button>
                        </div>
                    </form>
                    <button id="get-current-location" class="btn btn-secondary btn-block">
                        <i class="fas fa-map-marker-alt"></i> Use My Location
                    </button>
                </div>
                
                <div class="suggestions-container">
                    <h3>Reforestation Suggestions</h3>
                    <div id="loading-suggestions" class="loading-message">
                        <div class="mini-loader"></div>
                        <span>Loading suggestions...</span>
                    </div>
                    <ul id="suggestions-list" class="suggestions-list">
                        <!-- Suggestions will be populated here -->
                    </ul>
                </div>
                
                <div class="plant-info" id="plant-info" style="display: none;">
                    <h3>Selected Plant</h3>
                    <div class="plant-details">
                        <p><strong>Species:</strong> <span id="plant-species"></span></p>
                        <p><strong>Coordinates:</strong> <span id="plant-coordinates"></span></p>
                        <p><strong>Identified:</strong> <span id="plant-date"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
